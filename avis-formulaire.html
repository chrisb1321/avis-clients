
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Votre avis nous int√©resse</title>
    <style>
        /* Variables pour les couleurs de Swiss Financial Advice */
        :root {
            --primary-color: #1a3c5c; /* Bleu marine - couleur principale */
            --secondary-color: #16a082; /* Vert √©meraude - couleur secondaire */
            --accent-color: #16a082; /* Accent vert */
            --star-color: #f1c40f; /* Jaune pour les √©toiles */
            --text-color: #333333; /* Gris fonc√© pour le texte */
            --light-bg: #f5f5f5; /* Gris tr√®s clair pour les fonds */
            --border-color: #dddddd; /* Gris clair pour les bordures */
        }

        body {
            font-family: Arial, Helvetica, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: #f5f7fa;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 800px;
            margin: 40px auto;
            padding: 0;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            text-align: center;
            padding: 30px 20px;
        }

        .logo {
            max-width: 200px;
            margin-bottom: 20px;
        }

        h1 {
            font-size: 24px;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 18px;
            margin-bottom: 30px;
        }

        .question-section {
            background-color: white;
            padding: 30px;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--border-color);
        }

        .question-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .question-subtitle {
            color: #666;
            margin-bottom: 20px;
        }

        /* Syst√®me d'√©toiles */
        .stars-container {
            display: flex;
            margin: 20px 0;
        }

        .star {
            color: var(--star-color);
            font-size: 40px;
            margin-right: 10px;
            cursor: pointer;
        }

        .star.inactive {
            color: #ddd;
        }

        /* Zone de texte */
        .comment-area {
            margin: 20px 0;
        }

        textarea {
            width: 100%;
            padding: 15px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            min-height: 120px;
            font-family: inherit;
            box-sizing: border-box;
            margin-bottom: 15px;
            font-size: 16px;
        }

        textarea::placeholder {
            color: #999;
        }

        /* NPS (Net Promoter Score) */
        .nps-container {
            margin: 20px 0;
        }

        .nps-scale {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .nps-number {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #eee;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.2s;
        }

        .nps-number:hover, .nps-number.selected {
            background-color: var(--accent-color);
            color: white;
        }

        .nps-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 14px;
            color: #666;
        }

        /* Bouton de soumission */
        .submit-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 6px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            display: block;
            margin: 30px auto;
            transition: background-color 0.3s;
        }

        .submit-button:hover {
            background-color: var(--accent-color);
        }

        /* Responsive */
        @media (max-width: 600px) {
            .container {
                margin: 20px 10px;
            }
            
            .question-section {
                padding: 20px;
            }
            
            .stars-container {
                justify-content: center;
            }
            
            .star {
                font-size: 30px;
            }
            
            .nps-scale {
                flex-wrap: wrap;
                gap: 5px;
                justify-content: center;
            }
            
            .nps-number {
                width: 35px;
                height: 35px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="https://chrisb1321.github.io/avis-clients/logo-sfa.png" alt="Logo Swiss Financial Advice" class="logo" style="max-width: 220px;">
            <h1>Votre exp√©rience est pr√©cieuse, partagez-la !</h1>
        </div>

        <div class="question-section">
            <div class="question-title">Qu'avez-vous pens√© de notre service ?</div>
            <div class="question-subtitle">√ätes-vous satisfait de votre exp√©rience avec nous ?</div>
            
            <div class="stars-container" id="site-rating">
                <span class="star active" data-value="1">‚òÖ</span>
                <span class="star active" data-value="2">‚òÖ</span>
                <span class="star active" data-value="3">‚òÖ</span>
                <span class="star active" data-value="4">‚òÖ</span>
                <span class="star inactive" data-value="5">‚òÖ</span>
            </div>
            
            <div class="comment-area">
                <div class="question-subtitle">Partagez-nous votre avis :</div>
                <textarea id="site-feedback" placeholder="Navigation sur le site, offres propos√©es, qualit√© du service..."></textarea>
            </div>
        </div>

        <div class="question-section">
            <div class="question-title">Qu'avez-vous pens√© de votre exp√©rience ?</div>
            <div class="question-subtitle">Quel est votre niveau de satisfaction concernant notre service ?</div>
            
            <div class="stars-container" id="service-rating">
                <span class="star active" data-value="1">‚òÖ</span>
                <span class="star active" data-value="2">‚òÖ</span>
                <span class="star active" data-value="3">‚òÖ</span>
                <span class="star active" data-value="4">‚òÖ</span>
                <span class="star inactive" data-value="5">‚òÖ</span>
            </div>
            
            <div class="comment-area">
                <div class="question-subtitle">Partagez-nous votre avis :</div>
                <textarea id="service-feedback" placeholder="Qualit√© du service, rapport qualit√©-prix, exp√©rience globale..."></textarea>
            </div>
        </div>

        <div class="question-section">
            <div class="question-title">Recommanderiez-vous notre service ?</div>
            <div class="question-subtitle">Sur une √©chelle de 0 √† 10, quelle est la probabilit√© que vous nous recommandiez √† vos proches ?</div>
            
            <div class="nps-container">
                <div class="nps-scale">
                    <div class="nps-number" data-value="0">0</div>
                    <div class="nps-number" data-value="1">1</div>
                    <div class="nps-number" data-value="2">2</div>
                    <div class="nps-number" data-value="3">3</div>
                    <div class="nps-number" data-value="4">4</div>
                    <div class="nps-number" data-value="5">5</div>
                    <div class="nps-number" data-value="6">6</div>
                    <div class="nps-number" data-value="7">7</div>
                    <div class="nps-number" data-value="8">8</div>
                    <div class="nps-number" data-value="9">9</div>
                    <div class="nps-number" data-value="10">10</div>
                </div>
                <div class="nps-labels">
                    <span>Tr√®s peu probable</span>
                    <span>Tr√®s probable</span>
                </div>
            </div>
        </div>

        <div id="loading-message" style="display: none; text-align: center; padding: 20px; background: #e8f5e9; border-radius: 6px; margin: 20px 0;">
            <p style="color: #1a3c5c; font-weight: bold;">üìß Envoi de votre avis en cours...</p>
        </div>

        <form id="feedback-form">
            <!-- Champs cach√©s pour collecter les donn√©es -->
            <input type="hidden" name="site_rating" id="site-rating-value">
            <input type="hidden" name="service_rating" id="service-rating-value">
            <input type="hidden" name="recommendation_score" id="nps-value">
            <input type="hidden" name="client_name" id="client-name-field">
            <input type="hidden" name="date_visite" id="visit-date-field">
            <input type="hidden" name="service_used" id="service-used-field">
            <input type="hidden" name="original_rating" id="original-rating-field">
            
            <button type="submit" class="submit-button" id="submit-btn">Envoyer mon avis</button>
        </form>
    </div>

    <script>
        // Fonction pour r√©cup√©rer les param√®tres de l'URL
        function getUrlParams() {
            const params = {};
            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            
            for (const [key, value] of urlParams.entries()) {
                params[key] = value;
            }
            
            return params;
        }
        
        // Fonction pour initialiser la page avec les param√®tres
        function initializeWithParams() {
            const params = getUrlParams();
            
            // Pr√©-remplir les champs cach√©s avec les donn√©es de l'URL
            if (params.rating) {
                document.getElementById('original-rating-field').value = params.rating;
                
                // Pr√©-s√©lectionner les √©toiles dans les deux syst√®mes de notation
                const rating = parseInt(params.rating);
                preselectStars('site-rating', rating);
                preselectStars('service-rating', rating);
                
                // Mettre √† jour les valeurs des champs cach√©s
                document.getElementById('site-rating-value').value = rating;
                document.getElementById('service-rating-value').value = rating;
            }
            
            if (params.clientName) {
                document.getElementById('client-name-field').value = decodeURIComponent(params.clientName);
            }
            
            if (params.visitDate) {
                document.getElementById('visit-date-field').value = decodeURIComponent(params.visitDate);
            }
            
            if (params.service) {
                document.getElementById('service-used-field').value = decodeURIComponent(params.service);
            }
        }
        
        // Fonction pour pr√©-s√©lectionner les √©toiles
        function preselectStars(containerId, rating) {
            const container = document.getElementById(containerId);
            const stars = container.querySelectorAll('.star');
            
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                    star.classList.remove('inactive');
                } else {
                    star.classList.add('inactive');
                    star.classList.remove('active');
                }
            });
        }
        
        // Fonction pour g√©rer les clics sur les √©toiles
        function setupStarRating(containerId, hiddenFieldId) {
            const container = document.getElementById(containerId);
            const stars = container.querySelectorAll('.star');
            
            stars.forEach(star => {
                star.addEventListener('click', () => {
                    const value = parseInt(star.getAttribute('data-value'));
                    document.getElementById(hiddenFieldId).value = value;
                    
                    // Mettre √† jour l'affichage des √©toiles
                    stars.forEach((s, index) => {
                        if (index < value) {
                            s.classList.add('active');
                            s.classList.remove('inactive');
                        } else {
                            s.classList.add('inactive');
                            s.classList.remove('active');
                        }
                    });
                });
            });
        }
        
        // Fonction pour g√©rer les clics sur le NPS
        function setupNPS() {
            const numbers = document.querySelectorAll('.nps-number');
            
            numbers.forEach(num => {
                num.addEventListener('click', () => {
                    const value = num.getAttribute('data-value');
                    document.getElementById('nps-value').value = value;
                    
                    // R√©initialiser la s√©lection
                    numbers.forEach(n => n.classList.remove('selected'));
                    
                    // Marquer l'√©l√©ment s√©lectionn√©
                    num.classList.add('selected');
                });
            });
        }
        
        // Initialiser le formulaire
        document.addEventListener('DOMContentLoaded', () => {
            initializeWithParams();
            setupStarRating('site-rating', 'site-rating-value');
            setupStarRating('service-rating', 'service-rating-value');
            setupNPS();
            
            // G√©rer la soumission du formulaire
            document.getElementById('feedback-form').addEventListener('submit', function(event) {
                // Emp√™cher la soumission normale
                event.preventDefault();
                
                // Afficher le message de chargement
                document.getElementById('loading-message').style.display = 'block';
                document.getElementById('submit-btn').disabled = true;
                document.getElementById('submit-btn').textContent = 'Envoi en cours...';
                
                // Collecter toutes les donn√©es du formulaire
                const avisData = {
                    note_site: document.getElementById('site-rating-value').value || 'Non renseign√©',
                    note_service: document.getElementById('service-rating-value').value || 'Non renseign√©',
                    note_recommandation: document.getElementById('nps-value').value || 'Non renseign√©',
                    commentaire_site: document.getElementById('site-feedback').value || 'Aucun commentaire',
                    commentaire_service: document.getElementById('service-feedback').value || 'Aucun commentaire',
                    note_originale: document.getElementById('original-rating-field').value || 'Non renseign√©',
                    date_soumission: new Date().toLocaleString('fr-FR'),
                    nom_client: document.getElementById('client-name-field').value || 'Client anonyme'
                };
                
                // Simuler l'envoi (remplacez par votre service d'email si n√©cessaire)
                console.log('Avis client collect√©:', avisData);
                
                // Attendre 1.5 secondes pour simuler l'envoi, puis rediriger
                setTimeout(function() {
                    // Redirection vers la page de remerciement
                    window.location.href = 'https://chrisb1321.github.io/avis-clients/merci.html';
                }, 1500);
            });
        });
    </script>
</body>
</html>
